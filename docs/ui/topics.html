<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>话题模式 - 开口鸭</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      /* 适配iframe展示的设计风格 */
      body {
        width: 375px;
        height: 812px;
        overflow: hidden;
        background: linear-gradient(180deg, #f8fafc 0%, #f1f5f9 100%);
      }

      .scroll-container {
        overflow-y: auto;
        scrollbar-width: none;
        -ms-overflow-style: none;
      }
      .scroll-container::-webkit-scrollbar {
        display: none;
      }

      /* 现代卡片设计 */
      .topic-card {
        background: rgba(255, 255, 255, 0.8);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.3);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
      }

      .topic-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, transparent 50%);
        pointer-events: none;
      }

      .topic-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        background: rgba(255, 255, 255, 0.9);
      }

      .topic-card:active {
        transform: translateY(-2px) scale(0.98);
      }

      /* 渐变背景 */
      .gradient-bg {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      }

      .gradient-green {
        background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
      }

      .gradient-orange {
        background: linear-gradient(135deg, #ff6b6b 0%, #ffa726 100%);
      }

      .gradient-blue {
        background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      }

      .gradient-purple {
        background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
      }

      /* 动画效果 */
      @keyframes slideInUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .animate-slide-up {
        animation: slideInUp 0.6s cubic-bezier(0.4, 0, 0.2, 1);
      }

      /* 状态栏优化 */
      .status-bar {
        background: linear-gradient(180deg, rgba(0, 0, 0, 0.03) 0%, transparent 100%);
        backdrop-filter: blur(20px);
      }
    </style>
  </head>
  <body class="relative">
    <script src="auth.js"></script>

    <!-- iOS状态栏 -->
    <div class="status-bar h-11 flex items-center justify-between px-4 text-sm font-semibold text-gray-800">
          <div class="flex items-center space-x-1">
            <span>9:41</span>
          </div>
          <div class="w-16 h-4 bg-black rounded-full relative">
            <div class="absolute right-0.5 top-0.5 w-1 h-1 bg-white rounded-full"></div>
            <div class="absolute right-1 top-1 w-0.5 h-0.5 bg-white rounded-full"></div>
          </div>
          <div class="flex items-center space-x-1 text-gray-800">
            <i class="fas fa-signal text-xs"></i>
            <i class="fas fa-wifi text-xs"></i>
            <i class="fas fa-battery-three-quarters text-xs"></i>
          </div>
        </div>

    <!-- 导航栏 -->
    <div class="gradient-green text-white px-4 py-3 flex items-center shadow-lg">
      <button class="mr-3 p-2 rounded-full bg-white bg-opacity-20 hover:bg-opacity-30 transition-colors">
        <i class="fas fa-arrow-left text-lg"></i>
      </button>
      <h2 class="text-lg font-bold flex-1">话题模式</h2>
      <button class="bg-white bg-opacity-20 p-2 rounded-xl hover:bg-opacity-30 transition-colors" onclick="showProgressModal()">
        <i class="fas fa-chart-bar text-lg"></i>
      </button>
    </div>

    <!-- 主内容区域 -->
    <div class="px-4 pt-4 pb-20 scroll-container animate-slide-up" style="height: calc(812px - 88px - 60px);">
      <!-- 标题描述 -->
      <div class="mb-6">
        <h3 class="text-xl font-bold text-gray-800 mb-2">探索话题</h3>
        <p class="text-gray-600 text-sm leading-relaxed">选择感兴趣的话题，开始你的英语对话之旅</p>
      </div>

      <!-- 自定义话题 -->
      <div class="topic-card rounded-2xl p-4 mb-6 shadow-xl">
        <div class="flex items-center justify-between mb-4">
          <div class="flex items-center space-x-3">
            <div class="w-10 h-10 gradient-bg rounded-xl flex items-center justify-center">
              <i class="fas fa-star text-white text-lg"></i>
            </div>
            <div>
              <h4 class="text-lg font-bold text-gray-800">我的话题</h4>
              <p class="text-gray-600 text-xs">个性化定制内容</p>
            </div>
          </div>
          <button
            class="gradient-green text-white px-3 py-2 rounded-xl text-xs font-semibold shadow-lg hover:shadow-xl transition-all"
            onclick="checkAddTopicPermission()"
          >
            <i class="fas fa-plus mr-1"></i>创建
          </button>
        </div>

        <div class="space-y-3" id="customTopics">
          <!-- 自定义话题列表 -->
          <div
            class="flex items-center justify-between p-3 bg-white bg-opacity-70 rounded-xl border border-white border-opacity-50 cursor-pointer hover:bg-opacity-90 transition-all hover:scale-105 shadow-md"
            onclick="enterCustomTopic('游戏交流', 'fas fa-gamepad')"
          >
            <div class="flex items-center space-x-3">
              <div class="w-12 h-12 gradient-blue rounded-xl flex items-center justify-center shadow-lg">
                <i class="fas fa-gamepad text-white text-lg"></i>
              </div>
              <div>
                <div class="font-bold text-gray-800 text-sm">游戏交流</div>
                <div class="text-gray-600 text-xs">3个对话 • 已练习2次</div>
              </div>
            </div>
            <div class="flex items-center space-x-2">
              <button
                class="w-7 h-7 bg-blue-100 text-blue-600 rounded-lg flex items-center justify-center hover:bg-blue-200 transition-colors"
                onclick="event.stopPropagation(); editTopic('custom_game')"
              >
                <i class="fas fa-edit text-xs"></i>
              </button>
              <button
                class="w-7 h-7 bg-red-100 text-red-600 rounded-lg flex items-center justify-center hover:bg-red-200 transition-colors"
                onclick="event.stopPropagation(); deleteTopic('custom_game')"
              >
                <i class="fas fa-trash text-xs"></i>
              </button>
            </div>
          </div>

          <div
            class="flex items-center justify-between p-3 bg-white bg-opacity-70 rounded-xl border border-white border-opacity-50 cursor-pointer hover:bg-opacity-90 transition-all hover:scale-105 shadow-md"
            onclick="enterCustomTopic('音乐分享', 'fas fa-music')"
          >
            <div class="flex items-center space-x-3">
              <div class="w-12 h-12 gradient-purple rounded-xl flex items-center justify-center shadow-lg">
                <i class="fas fa-music text-white text-lg"></i>
              </div>
              <div>
                <div class="font-bold text-gray-800 text-sm">音乐分享</div>
                <div class="text-gray-600 text-xs">2个对话 • 已练习1次</div>
              </div>
            </div>
            <div class="flex items-center space-x-2">
              <button
                class="w-7 h-7 bg-purple-100 text-purple-600 rounded-lg flex items-center justify-center hover:bg-purple-200 transition-colors"
                onclick="event.stopPropagation(); editTopic('custom_music')"
              >
                <i class="fas fa-edit text-xs"></i>
              </button>
              <button
                class="w-7 h-7 bg-red-100 text-red-600 rounded-lg flex items-center justify-center hover:bg-red-200 transition-colors"
                onclick="event.stopPropagation(); deleteTopic('custom_music')"
              >
                <i class="fas fa-trash text-xs"></i>
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- 热门话题 -->
      <div class="mb-6">
        <h4 class="text-lg font-bold text-gray-800 mb-4">🔥 热门话题</h4>
        <div class="grid grid-cols-2 gap-3">
          <!-- 咖啡话题 -->
          <div class="topic-card rounded-2xl p-4 text-center hover:scale-105 transition-transform duration-300 cursor-pointer shadow-xl">
            <div class="gradient-orange w-16 h-16 rounded-2xl flex items-center justify-center mx-auto mb-3 shadow-lg">
              <i class="fas fa-coffee text-white text-2xl"></i>
            </div>
            <h4 class="font-bold text-gray-800 mb-2 text-base">咖啡</h4>
            <p class="text-gray-600 text-xs mb-3 leading-relaxed">点咖啡、描述口味偏好</p>
            <div class="bg-gradient-to-r from-orange-400 to-orange-500 text-white rounded-xl py-1 px-3">
              <span class="text-xs font-semibold">15个对话</span>
            </div>
          </div>

          <!-- 旅游话题 -->
          <div class="topic-card rounded-2xl p-4 text-center hover:scale-105 transition-transform duration-300 cursor-pointer shadow-xl">
            <div class="gradient-blue w-16 h-16 rounded-2xl flex items-center justify-center mx-auto mb-3 shadow-lg">
              <i class="fas fa-plane text-white text-2xl"></i>
            </div>
            <h4 class="font-bold text-gray-800 mb-2 text-base">旅游</h4>
            <p class="text-gray-600 text-xs mb-3 leading-relaxed">机场、酒店、问路</p>
            <div class="bg-gradient-to-r from-blue-400 to-blue-500 text-white rounded-xl py-1 px-3">
              <span class="text-xs font-semibold">20个对话</span>
            </div>
          </div>

          <!-- 健身话题 -->
          <div class="topic-card rounded-2xl p-4 text-center hover:scale-105 transition-transform duration-300 cursor-pointer shadow-xl">
            <div class="gradient-green w-16 h-16 rounded-2xl flex items-center justify-center mx-auto mb-3 shadow-lg">
              <i class="fas fa-dumbbell text-white text-2xl"></i>
            </div>
            <h4 class="font-bold text-gray-800 mb-2 text-base">健身</h4>
            <p class="text-gray-600 text-xs mb-3 leading-relaxed">健身房、运动计划</p>
            <div class="bg-gradient-to-r from-green-400 to-green-500 text-white rounded-xl py-1 px-3">
              <span class="text-xs font-semibold">12个对话</span>
            </div>
          </div>

          <!-- 餐厅话题 -->
          <div class="topic-card rounded-2xl p-4 text-center hover:scale-105 transition-transform duration-300 cursor-pointer shadow-xl">
            <div class="gradient-orange w-16 h-16 rounded-2xl flex items-center justify-center mx-auto mb-3 shadow-lg">
              <i class="fas fa-utensils text-white text-2xl"></i>
            </div>
            <h4 class="font-bold text-gray-800 mb-2 text-base">餐厅</h4>
            <p class="text-gray-600 text-xs mb-3 leading-relaxed">点餐、服务、买单</p>
            <div class="bg-gradient-to-r from-red-400 to-red-500 text-white rounded-xl py-1 px-3">
              <span class="text-xs font-semibold">18个对话</span>
            </div>
          </div>

          <!-- 购物话题 -->
          <div class="topic-card rounded-2xl p-4 text-center hover:scale-105 transition-transform duration-300 cursor-pointer shadow-xl">
            <div class="gradient-purple w-16 h-16 rounded-2xl flex items-center justify-center mx-auto mb-3 shadow-lg">
              <i class="fas fa-shopping-bag text-white text-2xl"></i>
            </div>
            <h4 class="font-bold text-gray-800 mb-2 text-base">购物</h4>
            <p class="text-gray-600 text-xs mb-3 leading-relaxed">选择、试穿、砍价</p>
            <div class="bg-gradient-to-r from-purple-400 to-purple-500 text-white rounded-xl py-1 px-3">
              <span class="text-xs font-semibold">16个对话</span>
            </div>
          </div>

          <!-- 工作话题 -->
          <div class="topic-card rounded-2xl p-4 text-center hover:scale-105 transition-transform duration-300 cursor-pointer shadow-xl">
            <div class="gradient-bg w-16 h-16 rounded-2xl flex items-center justify-center mx-auto mb-3 shadow-lg">
              <i class="fas fa-briefcase text-white text-2xl"></i>
            </div>
            <h4 class="font-bold text-gray-800 mb-2 text-base">工作</h4>
            <p class="text-gray-600 text-xs mb-3 leading-relaxed">面试、会议、同事</p>
            <div class="bg-gradient-to-r from-indigo-400 to-indigo-500 text-white rounded-xl py-1 px-3">
              <span class="text-xs font-semibold">22个对话</span>
            </div>
          </div>
        </div>
      </div>



      <!-- 分类话题 -->
      <div class="space-y-4">
        <!-- 日常交流 -->
        <div class="topic-card rounded-2xl p-4 shadow-xl">
          <h4 class="text-lg font-bold text-gray-800 mb-4 flex items-center">
            <span class="text-lg mr-2">💬</span>
            日常交流
          </h4>
          <div class="grid grid-cols-2 gap-3">
            <div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-3 text-center hover:scale-105 transition-transform cursor-pointer">
              <div class="w-12 h-12 gradient-blue rounded-xl flex items-center justify-center mx-auto mb-2 shadow-lg">
                <i class="fas fa-comments text-white text-lg"></i>
              </div>
              <div class="font-bold text-gray-800 text-sm mb-1">闲聊</div>
              <div class="text-gray-600 text-xs">8个对话</div>
            </div>
            <div class="bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-3 text-center hover:scale-105 transition-transform cursor-pointer">
              <div class="w-12 h-12 gradient-green rounded-xl flex items-center justify-center mx-auto mb-2 shadow-lg">
                <i class="fas fa-phone text-white text-lg"></i>
              </div>
              <div class="font-bold text-gray-800 text-sm mb-1">电话</div>
              <div class="text-gray-600 text-xs">6个对话</div>
            </div>
          </div>
        </div>

        <!-- 校园生活 -->
        <div class="topic-card rounded-2xl p-4 shadow-xl">
          <h4 class="text-lg font-bold text-gray-800 mb-4 flex items-center">
            <span class="text-lg mr-2">🎓</span>
            校园生活
          </h4>
          <div class="grid grid-cols-2 gap-3">
            <div class="bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-3 text-center hover:scale-105 transition-transform cursor-pointer">
              <div class="w-12 h-12 gradient-purple rounded-xl flex items-center justify-center mx-auto mb-2 shadow-lg">
                <i class="fas fa-graduation-cap text-white text-lg"></i>
              </div>
              <div class="font-bold text-gray-800 text-sm mb-1">课堂讨论</div>
              <div class="text-gray-600 text-xs">10个对话</div>
            </div>
            <div class="bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-3 text-center hover:scale-105 transition-transform cursor-pointer">
              <div class="w-12 h-12 gradient-orange rounded-xl flex items-center justify-center mx-auto mb-2 shadow-lg">
                <i class="fas fa-users text-white text-lg"></i>
              </div>
              <div class="font-bold text-gray-800 text-sm mb-1">社团活动</div>
              <div class="text-gray-600 text-xs">7个对话</div>
            </div>
          </div>
        </div>
      </div>
        </div>

    </div>

    <!-- 底部导航栏 -->
    <div class="absolute bottom-0 left-0 right-0 bg-white bg-opacity-90 backdrop-filter backdrop-blur-xl border-t border-gray-200 border-opacity-30">
      <div class="flex justify-around items-center py-2 px-4">
        <div class="flex flex-col items-center py-2 px-3 rounded-xl hover:bg-gray-100 transition-colors cursor-pointer" onclick="window.location.href='home.html'">
          <i class="fas fa-home text-gray-400 text-lg mb-1"></i>
          <span class="text-xs text-gray-500 font-medium">首页</span>
        </div>
        <div class="flex flex-col items-center py-2 px-3 rounded-xl bg-green-50 transition-colors cursor-pointer">
          <i class="fas fa-comments text-green-500 text-lg mb-1"></i>
          <span class="text-xs text-green-600 font-semibold">话题</span>
        </div>
        <div class="flex flex-col items-center py-2 px-3 rounded-xl hover:bg-gray-100 transition-colors cursor-pointer" onclick="window.location.href='progress.html'">
          <i class="fas fa-chart-line text-gray-400 text-lg mb-1"></i>
          <span class="text-xs text-gray-500 font-medium">进度</span>
        </div>
        <div class="flex flex-col items-center py-2 px-3 rounded-xl hover:bg-gray-100 transition-colors cursor-pointer" onclick="window.location.href='profile.html'">
          <i class="fas fa-user text-gray-400 text-lg mb-1"></i>
          <span class="text-xs text-gray-500 font-medium">我的</span>
        </div>
      </div>
    </div>

    <!-- 添加话题弹窗 -->
    <div
      id="addTopicModal"
      class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center transition-opacity duration-300"
    >
      <div
        class="bg-white rounded-2xl p-6 mx-4 w-full max-w-sm transform transition-transform duration-300 scale-95"
        id="modalContent"
      >
        <div class="flex items-center justify-between mb-4">
          <h3 class="text-lg font-semibold text-gray-800">添加自定义话题</h3>
          <button onclick="hideAddTopic()" class="text-gray-400 hover:text-gray-600">
            <i class="fas fa-times text-xl"></i>
          </button>
        </div>

        <form id="addTopicForm" class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">话题名称</label>
            <input
              type="text"
              id="topicName"
              placeholder="例如：电影讨论"
              class="w-full p-3 border border-gray-300 rounded-lg focus:border-green-500 focus:outline-none"
            />
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">话题描述</label>
            <textarea
              id="topicDescription"
              placeholder="描述这个话题的对话场景..."
              rows="3"
              class="w-full p-3 border border-gray-300 rounded-lg focus:border-green-500 focus:outline-none resize-none"
            ></textarea>
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">选择图标</label>
            <div class="grid grid-cols-6 gap-2">
              <button
                type="button"
                class="icon-option p-3 border border-gray-300 rounded-lg hover:border-green-500"
                data-icon="fas fa-gamepad"
              >
                <i class="fas fa-gamepad text-xl text-blue-500"></i>
              </button>
              <button
                type="button"
                class="icon-option p-3 border border-gray-300 rounded-lg hover:border-green-500"
                data-icon="fas fa-music"
              >
                <i class="fas fa-music text-xl text-purple-500"></i>
              </button>
              <button
                type="button"
                class="icon-option p-3 border border-gray-300 rounded-lg hover:border-green-500"
                data-icon="fas fa-film"
              >
                <i class="fas fa-film text-xl text-red-500"></i>
              </button>
              <button
                type="button"
                class="icon-option p-3 border border-gray-300 rounded-lg hover:border-green-500"
                data-icon="fas fa-book"
              >
                <i class="fas fa-book text-xl text-green-500"></i>
              </button>
              <button
                type="button"
                class="icon-option p-3 border border-gray-300 rounded-lg hover:border-green-500"
                data-icon="fas fa-car"
              >
                <i class="fas fa-car text-xl text-gray-500"></i>
              </button>
              <button
                type="button"
                class="icon-option p-3 border border-gray-300 rounded-lg hover:border-green-500"
                data-icon="fas fa-home"
              >
                <i class="fas fa-home text-xl text-orange-500"></i>
              </button>
            </div>
          </div>

          <div class="flex space-x-3 pt-4">
            <button
              type="button"
              onclick="hideAddTopic()"
              class="flex-1 bg-gray-100 text-gray-700 py-3 rounded-lg font-medium"
            >
              取消
            </button>
            <button
              type="submit"
              class="flex-1 bg-green-500 text-white py-3 rounded-lg font-medium"
            >
              创建话题
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- 学习进度弹窗 -->
    <div
      id="progressModal"
      class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center transition-opacity duration-300"
    >
      <div
        class="bg-white rounded-2xl p-6 mx-4 w-full max-w-md max-h-96 overflow-y-auto transform transition-transform duration-300 scale-95"
        id="progressModalContent"
      >
        <div class="flex items-center justify-between mb-6">
          <h3 class="text-lg font-semibold text-gray-800">📊 话题学习进度</h3>
          <button onclick="hideProgressModal()" class="text-gray-400 hover:text-gray-600">
            <i class="fas fa-times text-xl"></i>
          </button>
        </div>

        <div class="space-y-4">
          <div class="flex items-center justify-between">
            <div class="flex items-center space-x-3">
              <div class="w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center">
                <i class="fas fa-coffee text-orange-500"></i>
              </div>
              <div>
                <div class="font-medium text-gray-800 text-sm">咖啡话题</div>
                <div class="text-gray-500 text-xs">已完成 8/15 个对话</div>
              </div>
            </div>
            <div class="text-right">
              <div class="text-orange-500 text-sm font-medium">53%</div>
              <div class="w-16 bg-gray-200 rounded-full h-1 mt-1">
                <div class="bg-orange-500 h-1 rounded-full w-8/15"></div>
              </div>
            </div>
          </div>

          <div class="flex items-center justify-between">
            <div class="flex items-center space-x-3">
              <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
                <i class="fas fa-plane text-blue-500"></i>
              </div>
              <div>
                <div class="font-medium text-gray-800 text-sm">旅游话题</div>
                <div class="text-gray-500 text-xs">已完成 12/20 个对话</div>
              </div>
            </div>
            <div class="text-right">
              <div class="text-blue-500 text-sm font-medium">60%</div>
              <div class="w-16 bg-gray-200 rounded-full h-1 mt-1">
                <div class="bg-blue-500 h-1 rounded-full w-3/5"></div>
              </div>
            </div>
          </div>

          <div class="flex items-center justify-between">
            <div class="flex items-center space-x-3">
              <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center">
                <i class="fas fa-dumbbell text-green-500"></i>
              </div>
              <div>
                <div class="font-medium text-gray-800 text-sm">健身话题</div>
                <div class="text-gray-500 text-xs">已完成 5/12 个对话</div>
              </div>
            </div>
            <div class="text-right">
              <div class="text-green-500 text-sm font-medium">42%</div>
              <div class="w-16 bg-gray-200 rounded-full h-1 mt-1">
                <div class="bg-green-500 h-1 rounded-full w-5/12"></div>
              </div>
            </div>
          </div>

          <div class="flex items-center justify-between">
            <div class="flex items-center space-x-3">
              <div class="w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center">
                <i class="fas fa-utensils text-red-500"></i>
              </div>
              <div>
                <div class="font-medium text-gray-800 text-sm">餐厅话题</div>
                <div class="text-gray-500 text-xs">已完成 14/18 个对话</div>
              </div>
            </div>
            <div class="text-right">
              <div class="text-red-500 text-sm font-medium">78%</div>
              <div class="w-16 bg-gray-200 rounded-full h-1 mt-1">
                <div class="bg-red-500 h-1 rounded-full w-14/18"></div>
              </div>
            </div>
          </div>

          <div class="flex items-center justify-between">
            <div class="flex items-center space-x-3">
              <div class="w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center">
                <i class="fas fa-shopping-bag text-purple-500"></i>
              </div>
              <div>
                <div class="font-medium text-gray-800 text-sm">购物话题</div>
                <div class="text-gray-500 text-xs">已完成 6/16 个对话</div>
              </div>
            </div>
            <div class="text-right">
              <div class="text-purple-500 text-sm font-medium">38%</div>
              <div class="w-16 bg-gray-200 rounded-full h-1 mt-1">
                <div class="bg-purple-500 h-1 rounded-full w-6/16"></div>
              </div>
            </div>
          </div>

          <div class="flex items-center justify-between">
            <div class="flex items-center space-x-3">
              <div class="w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center">
                <i class="fas fa-briefcase text-indigo-500"></i>
              </div>
              <div>
                <div class="font-medium text-gray-800 text-sm">工作话题</div>
                <div class="text-gray-500 text-xs">已完成 18/22 个对话</div>
              </div>
            </div>
            <div class="text-right">
              <div class="text-indigo-500 text-sm font-medium">82%</div>
              <div class="w-16 bg-gray-200 rounded-full h-1 mt-1">
                <div class="bg-indigo-500 h-1 rounded-full w-18/22"></div>
              </div>
            </div>
          </div>

          <div class="flex items-center justify-between">
            <div class="flex items-center space-x-3">
              <div class="w-10 h-10 bg-teal-100 rounded-lg flex items-center justify-center">
                <i class="fas fa-user-md text-teal-500"></i>
              </div>
              <div>
                <div class="font-medium text-gray-800 text-sm">医院话题</div>
                <div class="text-gray-500 text-xs">已完成 2/14 个对话</div>
              </div>
            </div>
            <div class="text-right">
              <div class="text-teal-500 text-sm font-medium">14%</div>
              <div class="w-16 bg-gray-200 rounded-full h-1 mt-1">
                <div class="bg-teal-500 h-1 rounded-full w-2/14"></div>
              </div>
            </div>
          </div>

          <div class="flex items-center justify-between">
            <div class="flex items-center space-x-3">
              <div class="w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center">
                <i class="fas fa-sun text-yellow-500"></i>
              </div>
              <div>
                <div class="font-medium text-gray-800 text-sm">天气话题</div>
                <div class="text-gray-500 text-xs">已完成 7/10 个对话</div>
              </div>
            </div>
            <div class="text-right">
              <div class="text-yellow-500 text-sm font-medium">70%</div>
              <div class="w-16 bg-gray-200 rounded-full h-1 mt-1">
                <div class="bg-yellow-500 h-1 rounded-full w-7/10"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      let selectedIcon = 'fas fa-gamepad'

      // 显示添加话题弹窗
      function showAddTopic() {
        const modal = document.getElementById('addTopicModal')
        const modalContent = document.getElementById('modalContent')
        modal.classList.remove('hidden')

        // 添加动画效果
        setTimeout(() => {
          modalContent.classList.remove('scale-95')
          modalContent.classList.add('scale-100')
        }, 10)
      }

      // 隐藏添加话题弹窗
      function hideAddTopic() {
        const modal = document.getElementById('addTopicModal')
        const modalContent = document.getElementById('modalContent')

        modalContent.classList.remove('scale-100')
        modalContent.classList.add('scale-95')

        setTimeout(() => {
          modal.classList.add('hidden')
          document.getElementById('addTopicForm').reset()
          // 重置图标选择
          document.querySelectorAll('.icon-option').forEach((btn) => {
            btn.classList.remove('border-green-500', 'bg-green-50')
            btn.classList.add('border-gray-300')
          })
          selectedIcon = 'fas fa-gamepad'
        }, 300)
      }

      // 图标选择
      document.querySelectorAll('.icon-option').forEach((button) => {
        button.addEventListener('click', function () {
          document.querySelectorAll('.icon-option').forEach((btn) => {
            btn.classList.remove('border-green-500', 'bg-green-50')
            btn.classList.add('border-gray-300')
          })
          this.classList.remove('border-gray-300')
          this.classList.add('border-green-500', 'bg-green-50')
          selectedIcon = this.dataset.icon
        })
      })

      // 表单提交
      document.getElementById('addTopicForm').addEventListener('submit', function (e) {
        e.preventDefault()

        const topicName = document.getElementById('topicName').value
        const topicDescription = document.getElementById('topicDescription').value

        if (!topicName.trim()) {
          alert('请输入话题名称')
          return
        }

        // 创建新话题
        addCustomTopic(topicName, topicDescription, selectedIcon)
        hideAddTopic()

        // 显示成功提示
        showSuccessMessage('话题创建成功！')
      })

      // 添加自定义话题
      function addCustomTopic(name, description, icon) {
        const customTopicsContainer = document.getElementById('customTopics')
        const topicId = 'topic_' + Date.now()

        const topicHtml = `
                <div class="flex items-center justify-between p-3 bg-blue-50 rounded-lg border border-blue-200 cursor-pointer hover:bg-blue-100 transition-colors" id="${topicId}" onclick="enterCustomTopic('${name}', '${icon}')">
                    <div class="flex items-center space-x-3">
                        <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
                            <i class="${icon} text-blue-500"></i>
                        </div>
                        <div>
                            <div class="font-medium text-gray-800 text-sm">${name}</div>
                            <div class="text-gray-500 text-xs">自定义话题 • 0个对话</div>
                        </div>
                    </div>
                    <div class="flex items-center space-x-2">
                        <button class="text-blue-500 text-xs" onclick="event.stopPropagation(); editTopic('${topicId}')">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="text-red-500 text-xs" onclick="event.stopPropagation(); deleteTopic('${topicId}')">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
            `

        customTopicsContainer.insertAdjacentHTML('afterbegin', topicHtml)
      }

      // 编辑话题
      function editTopic(topicId) {
        // 这里可以实现编辑功能
        alert('编辑功能开发中...')
      }

      // 删除话题
      function deleteTopic(topicId) {
        if (confirm('确定要删除这个话题吗？')) {
          document.getElementById(topicId).remove()
        }
      }

      // 检查添加话题权限
      function checkAddTopicPermission() {
        if (isMember()) {
          showAddTopic()
        } else {
          showMembershipPrompt('添加自定义话题是会员专属功能，开通会员即可无限创建个人话题。')
        }
      }

      // 显示成功提示
      function showSuccessMessage(message) {
        const toast = document.createElement('div')
        toast.className =
          'fixed top-20 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50'
        toast.textContent = message
        document.body.appendChild(toast)

        setTimeout(() => {
          toast.remove()
        }, 2000)
      }

      // 显示学习进度弹窗
      function showProgressModal() {
        const modal = document.getElementById('progressModal')
        const modalContent = document.getElementById('progressModalContent')
        modal.classList.remove('hidden')

        // 添加动画效果
        setTimeout(() => {
          modalContent.classList.remove('scale-95')
          modalContent.classList.add('scale-100')
        }, 10)
      }

      // 隐藏学习进度弹窗
      function hideProgressModal() {
        const modal = document.getElementById('progressModal')
        const modalContent = document.getElementById('progressModalContent')

        modalContent.classList.remove('scale-100')
        modalContent.classList.add('scale-95')

        setTimeout(() => {
          modal.classList.add('hidden')
        }, 300)
      }

      // 进入自定义话题
      function enterCustomTopic(topicName, icon) {
        // 这里可以实现进入话题功能
        window.location.href = `topic-chat.html?topic=${encodeURIComponent(topicName)}&icon=${encodeURIComponent(icon)}`
      }
    </script>
  </body>
</html>
