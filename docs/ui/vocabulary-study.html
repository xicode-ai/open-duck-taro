<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>èƒŒå•è¯å­¦ä¹  - å¼€å£é¸­</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      .scroll-container {
        overflow-y: auto;
        scrollbar-width: thin;
        scrollbar-color: #cbd5e0 #f7fafc;
      }
      .scroll-container::-webkit-scrollbar {
        width: 4px;
      }
      .scroll-container::-webkit-scrollbar-track {
        background: #f7fafc;
      }
      .scroll-container::-webkit-scrollbar-thumb {
        background: #cbd5e0;
        border-radius: 2px;
      }
      .word-card {
        animation: slideIn 0.3s ease-out;
      }
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
    </style>
  </head>
  <body class="bg-gray-50 h-screen overflow-hidden flex flex-col">
    <script src="auth.js"></script>

    <!-- iOSçŠ¶æ€æ  -->
    <div
      class="bg-white h-11 flex items-center justify-between px-4 text-sm font-medium flex-shrink-0"
    >
      <div class="flex items-center space-x-1">
        <span>9:41</span>
      </div>
      <div class="w-16 h-4 bg-black rounded-full relative">
        <div class="absolute right-0 top-0 w-1 h-1 bg-white rounded-full m-1"></div>
      </div>
      <div class="flex items-center space-x-1">
        <i class="fas fa-signal text-xs"></i>
        <i class="fas fa-wifi text-xs"></i>
        <i class="fas fa-battery-three-quarters text-xs"></i>
      </div>
    </div>

    <!-- å¯¼èˆªæ  -->
    <div class="bg-red-500 text-white px-4 py-3 flex items-center flex-shrink-0">
      <i class="fas fa-arrow-left text-xl mr-4" onclick="history.back()"></i>
      <h2 class="text-lg font-semibold flex-1" id="stageTitle">èƒŒå•è¯</h2>
      <button class="bg-white bg-opacity-20 p-2 rounded-lg">
        <i class="fas fa-history text-xl"></i>
      </button>
    </div>

    <!-- ä¸»å†…å®¹åŒºåŸŸ -->
    <div class="flex-1 px-4 pt-6 pb-20 scroll-container">
      <!-- å½“å‰é˜¶æ®µæ˜¾ç¤º -->
      <div class="mb-4">
        <div
          class="inline-flex items-center space-x-2 bg-white px-4 py-2 rounded-full shadow-sm border border-gray-100"
        >
          <span id="stageIcon" class="text-lg">ğŸŒ±</span>
          <span id="stageName" class="text-sm font-medium text-gray-700">èŒèŠ½æœŸ</span>
          <span id="stageAge" class="text-xs text-gray-500">3-6å²</span>
        </div>
      </div>

      <!-- å•è¯å¡ç‰‡ -->
      <div class="word-card bg-white rounded-2xl p-6 shadow-sm border border-gray-100 mb-6">
        <div class="flex justify-between items-start mb-4">
          <div>
            <h3 class="text-3xl font-bold text-gray-900 mb-1" id="wordText">immense</h3>
            <p class="text-gray-500 font-medium" id="wordMeaning">adj. æå¤§çš„ï¼Œå·¨å¤§çš„</p>
          </div>
          <button class="text-gray-400 hover:text-red-500 transition-colors" id="favoriteBtn">
            <i class="fas fa-star text-xl"></i>
          </button>
        </div>

        <!-- éŸ³æ ‡å‘éŸ³ -->
        <div class="flex items-center space-x-6 mb-6">
          <div class="flex items-center space-x-2">
            <span class="text-sm font-semibold text-gray-400">è‹±</span>
            <span class="text-gray-700 font-mono" id="ukPhonetic">/ÉªËˆmens/</span>
            <button
              class="text-red-500 hover:text-red-600 transition-colors"
              onclick="playAudio('uk')"
            >
              <i class="fas fa-volume-up"></i>
            </button>
          </div>
          <div class="flex items-center space-x-2">
            <span class="text-sm font-semibold text-gray-400">ç¾</span>
            <span class="text-gray-700 font-mono" id="usPhonetic">/ÉªËˆmens/</span>
            <button
              class="text-red-500 hover:text-red-600 transition-colors"
              onclick="playAudio('us')"
            >
              <i class="fas fa-volume-up"></i>
            </button>
          </div>
        </div>

        <!-- ä¾‹å¥ -->
        <div class="border-t border-gray-100 pt-4">
          <div class="bg-gray-50 rounded-xl p-4">
            <p class="text-gray-800 mb-2 leading-relaxed" id="exampleSentence">
              He inherited an
              <span class="font-semibold text-red-500 bg-red-50 px-1 rounded">immense</span>
              fortune.
            </p>
            <p class="text-gray-500 text-sm" id="exampleTranslation">ä»–ç»§æ‰¿äº†å·¨é¢è´¢å¯Œã€‚</p>
          </div>
        </div>
      </div>

      <!-- æ“ä½œæŒ‰é’® -->
      <div class="grid grid-cols-3 gap-4 mb-6">
        <button
          class="action-btn bg-white rounded-2xl p-4 shadow-sm border border-gray-100 text-center active:scale-95 transition-transform"
          data-action="unknown"
        >
          <div
            class="w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center mx-auto mb-2"
          >
            <i class="fas fa-times text-red-500 text-xl"></i>
          </div>
          <span class="text-sm font-medium text-gray-700">ä¸è®¤è¯†</span>
        </button>

        <button
          class="action-btn bg-white rounded-2xl p-4 shadow-sm border border-gray-100 text-center active:scale-95 transition-transform"
          data-action="vague"
        >
          <div
            class="w-12 h-12 bg-yellow-100 rounded-xl flex items-center justify-center mx-auto mb-2"
          >
            <i class="fas fa-question text-yellow-500 text-xl"></i>
          </div>
          <span class="text-sm font-medium text-gray-700">æ¨¡ç³Š</span>
        </button>

        <button
          class="action-btn bg-white rounded-2xl p-4 shadow-sm border border-gray-100 text-center active:scale-95 transition-transform"
          data-action="known"
        >
          <div
            class="w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center mx-auto mb-2"
          >
            <i class="fas fa-check text-green-500 text-xl"></i>
          </div>
          <span class="text-sm font-medium text-gray-700">è®¤è¯†</span>
        </button>
      </div>

      <!-- å­¦ä¹ ç»Ÿè®¡ -->
      <div class="bg-white rounded-2xl p-4 shadow-sm border border-gray-100">
        <h4 class="font-semibold text-gray-800 mb-3">ä»Šæ—¥å­¦ä¹ è¿›åº¦</h4>
        <div class="grid grid-cols-3 gap-4 text-center">
          <div>
            <div class="text-2xl font-bold text-red-500 mb-1" id="totalWords">12</div>
            <div class="text-xs text-gray-500">å·²å­¦å•è¯</div>
          </div>
          <div>
            <div class="text-2xl font-bold text-green-500 mb-1" id="masteredWords">8</div>
            <div class="text-xs text-gray-500">æŒæ¡å•è¯</div>
          </div>
          <div>
            <div class="text-2xl font-bold text-blue-500 mb-1" id="streakDays">5</div>
            <div class="text-xs text-gray-500">è¿ç»­å¤©æ•°</div>
          </div>
        </div>
      </div>
    </div>

    <!-- åº•éƒ¨å¯¼èˆªæ  -->
    <div class="bg-white border-t border-gray-200 flex-shrink-0">
      <div class="flex justify-around items-center py-2 px-4">
        <div class="flex flex-col items-center py-2" onclick="window.location.href='home.html'">
          <i class="fas fa-home text-gray-400 text-xl"></i>
          <span class="text-xs text-gray-400 mt-1">é¦–é¡µ</span>
        </div>
        <div class="flex flex-col items-center py-2" onclick="window.location.href='progress.html'">
          <i class="fas fa-chart-line text-gray-400 text-xl"></i>
          <span class="text-xs text-gray-400 mt-1">è¿›åº¦</span>
        </div>
        <div class="flex flex-col items-center py-2" onclick="window.location.href='profile.html'">
          <i class="fas fa-user text-gray-400 text-xl"></i>
          <span class="text-xs text-gray-400 mt-1">æˆ‘çš„</span>
        </div>
      </div>
    </div>

    <script>
      // è·å–URLå‚æ•°ä¸­çš„é˜¶æ®µä¿¡æ¯
      const urlParams = new URLSearchParams(window.location.search)
      const stage = urlParams.get('stage') || 'èŒèŠ½æœŸ'

      // é˜¶æ®µé…ç½®
      const stageConfig = {
        èŒèŠ½æœŸ: { icon: 'ğŸŒ±', age: '3-6å²', color: 'green' },
        åŸºç¡€æœŸ: { icon: 'ğŸ“š', age: '6-12å²', color: 'blue' },
        å‘å±•æœŸ: { icon: 'ğŸš€', age: '12-15å²', color: 'purple' },
        åŠ é€ŸæœŸ: { icon: 'âš¡ï¸', age: '15-18å²', color: 'orange' },
        ç²¾é€šæœŸ: { icon: 'ğŸ†', age: '18-30å²', color: 'yellow' },
        å¤§å¸ˆæœŸ: { icon: 'ğŸ§˜', age: '30å²+', color: 'indigo' },
      }

      // æ›´æ–°é¡µé¢æ ‡é¢˜å’Œé˜¶æ®µä¿¡æ¯
      document.getElementById('stageTitle').textContent = `èƒŒå•è¯ - ${stage}`
      document.getElementById('stageIcon').textContent = stageConfig[stage]?.icon || 'ğŸŒ±'
      document.getElementById('stageName').textContent = stage
      document.getElementById('stageAge').textContent = stageConfig[stage]?.age || '3-6å²'

      // æ¨¡æ‹Ÿå•è¯æ•°æ®ï¼ˆå®é™…åº”ç”¨ä¸­åº”è¯¥ä»åç«¯è·å–ï¼‰
      const words = [
        {
          word: 'immense',
          meaning: 'adj. æå¤§çš„ï¼Œå·¨å¤§çš„',
          ukPhonetic: '/ÉªËˆmens/',
          usPhonetic: '/ÉªËˆmens/',
          example: 'He inherited an immense fortune.',
          translation: 'ä»–ç»§æ‰¿äº†å·¨é¢è´¢å¯Œã€‚',
          isFavorite: false,
        },
        {
          word: 'brilliant',
          meaning: 'adj. æ°å‡ºçš„ï¼Œè¾‰ç…Œçš„',
          ukPhonetic: '/ËˆbrÉªljÉ™nt/',
          usPhonetic: '/ËˆbrÉªljÉ™nt/',
          example: 'She has a brilliant mind.',
          translation: 'å¥¹æœ‰ä¸€ä¸ªèªæ˜çš„å¤´è„‘ã€‚',
          isFavorite: true,
        },
        {
          word: 'magnificent',
          meaning: 'adj. å£®ä¸½çš„ï¼Œå®ä¼Ÿçš„',
          ukPhonetic: '/mÃ¦É¡ËˆnÉªfÉªsnt/',
          usPhonetic: '/mÃ¦É¡ËˆnÉªfÉªsnt/',
          example: 'The palace is magnificent.',
          translation: 'è¿™åº§å®«æ®¿å¾ˆå®ä¼Ÿã€‚',
          isFavorite: false,
        },
      ]

      let currentWordIndex = 0
      let totalWords = 12
      let masteredWords = 8
      let streakDays = 5

      // æ›´æ–°å•è¯å¡ç‰‡
      function updateWordCard() {
        const word = words[currentWordIndex]
        document.getElementById('wordText').textContent = word.word
        document.getElementById('wordMeaning').textContent = word.meaning
        document.getElementById('ukPhonetic').textContent = word.ukPhonetic
        document.getElementById('usPhonetic').textContent = word.usPhonetic
        document.getElementById('exampleSentence').innerHTML = word.example.replace(
          new RegExp(word.word, 'gi'),
          `<span class="font-semibold text-red-500 bg-red-50 px-1 rounded">${word.word}</span>`,
        )
        document.getElementById('exampleTranslation').textContent = word.translation

        // æ›´æ–°æ”¶è—æŒ‰é’®çŠ¶æ€
        const favoriteBtn = document.getElementById('favoriteBtn')
        if (word.isFavorite) {
          favoriteBtn.querySelector('i').classList.remove('text-gray-400')
          favoriteBtn.querySelector('i').classList.add('text-red-500')
        } else {
          favoriteBtn.querySelector('i').classList.remove('text-red-500')
          favoriteBtn.querySelector('i').classList.add('text-gray-400')
        }
      }

      // æ’­æ”¾éŸ³é¢‘
      function playAudio(type) {
        console.log(`æ’­æ”¾${type === 'uk' ? 'è‹±å¼' : 'ç¾å¼'}å‘éŸ³`)
        // å®é™…åº”ç”¨ä¸­åº”è¯¥è°ƒç”¨TTS API
      }

      // å¤„ç†æ“ä½œæŒ‰é’®ç‚¹å‡»
      document.querySelectorAll('.action-btn').forEach((button) => {
        button.addEventListener('click', () => {
          const action = button.getAttribute('data-action')
          console.log(`ç”¨æˆ·é€‰æ‹©äº†: ${action}`)

          // æ›´æ–°ç»Ÿè®¡æ•°æ®
          if (action === 'known') {
            masteredWords++
          }
          totalWords++

          // æ›´æ–°ç»Ÿè®¡æ˜¾ç¤º
          document.getElementById('totalWords').textContent = totalWords
          document.getElementById('masteredWords').textContent = masteredWords

          // åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªå•è¯
          currentWordIndex = (currentWordIndex + 1) % words.length
          updateWordCard()
        })
      })

      // æ”¶è—æŒ‰é’®ç‚¹å‡»
      document.getElementById('favoriteBtn').addEventListener('click', () => {
        const icon = document.getElementById('favoriteBtn').querySelector('i')
        if (icon.classList.contains('text-red-500')) {
          icon.classList.remove('text-red-500')
          icon.classList.add('text-gray-400')
          words[currentWordIndex].isFavorite = false
        } else {
          icon.classList.remove('text-gray-400')
          icon.classList.add('text-red-500')
          words[currentWordIndex].isFavorite = true
        }
      })

      // åˆå§‹åŒ–é¡µé¢
      updateWordCard()
    </script>
  </body>
</html>
