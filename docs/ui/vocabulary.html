<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>选择学习阶段 - 开口鸭</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      .scroll-container {
        overflow-y: auto;
        scrollbar-width: thin;
        scrollbar-color: #cbd5e0 #f7fafc;
      }
      .scroll-container::-webkit-scrollbar {
        width: 4px;
      }
      .scroll-container::-webkit-scrollbar-track {
        background: #f7fafc;
      }
      .scroll-container::-webkit-scrollbar-thumb {
        background: #cbd5e0;
        border-radius: 2px;
      }
      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 1000;
      }
      .modal.show {
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .modal-content {
        background: white;
        border-radius: 20px;
        padding: 24px;
        margin: 20px;
        max-width: 320px;
        text-align: center;
        box-shadow:
          0 20px 25px -5px rgba(0, 0, 0, 0.1),
          0 10px 10px -5px rgba(0, 0, 0, 0.04);
      }
    </style>
  </head>
  <body class="bg-gray-50 h-screen overflow-hidden">
    <script src="auth.js"></script>

    <!-- iOS状态栏 -->
    <div class="bg-white h-11 flex items-center justify-between px-4 text-sm font-medium">
      <div class="flex items-center space-x-1">
        <span>9:41</span>
      </div>
      <div class="w-16 h-4 bg-black rounded-full relative">
        <div class="absolute right-0 top-0 w-1 h-1 bg-white rounded-full m-1"></div>
      </div>
      <div class="flex items-center space-x-1">
        <i class="fas fa-signal text-xs"></i>
        <i class="fas fa-wifi text-xs"></i>
        <i class="fas fa-battery-three-quarters text-xs"></i>
      </div>
    </div>

    <!-- 导航栏 -->
    <div class="bg-red-500 text-white px-4 py-3 flex items-center">
      <i class="fas fa-arrow-left text-xl mr-4" onclick="history.back()"></i>
      <h2 class="text-lg font-semibold flex-1">背单词</h2>
      <button class="bg-white bg-opacity-20 p-2 rounded-lg">
        <i class="fas fa-history text-xl"></i>
      </button>
    </div>

    <!-- 主内容区域 -->
    <div class="px-4 pt-6 pb-20 h-full scroll-container">
      <!-- 标题描述 -->
      <div class="mb-6">
        <h3 class="text-xl font-bold text-gray-800 mb-2">选择你的学习阶段</h3>
        <p class="text-gray-600 text-sm">语境学习法，大脑善于记忆有联系、有故事的信息</p>
      </div>

      <!-- 学习阶段选择 -->
      <div class="grid grid-cols-3 gap-4 mb-6">
        <button
          class="stage-btn bg-white rounded-2xl p-4 shadow-sm border border-gray-100 text-center active:scale-95 transition-transform relative"
          data-stage="萌芽期"
          data-requires-membership="false"
        >
          <div
            class="w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center mx-auto mb-2"
          >
            <span class="text-2xl">🌱</span>
          </div>
          <div class="text-sm font-semibold text-gray-800">萌芽期</div>
          <div class="text-xs text-gray-500 mt-1">3-6岁</div>
        </button>

        <button
          class="stage-btn bg-white rounded-2xl p-4 shadow-sm border border-gray-100 text-center active:scale-95 transition-transform relative"
          data-stage="基础期"
          data-requires-membership="false"
        >
          <div
            class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mx-auto mb-2"
          >
            <span class="text-2xl">📚</span>
          </div>
          <div class="text-sm font-semibold text-gray-800">基础期</div>
          <div class="text-xs text-gray-500 mt-1">6-12岁</div>
        </button>

        <button
          class="stage-btn bg-white rounded-2xl p-4 shadow-sm border border-gray-100 text-center active:scale-95 transition-transform relative"
          data-stage="发展期"
          data-requires-membership="true"
        >
          <div
            class="w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center mx-auto mb-2"
          >
            <span class="text-2xl">🚀</span>
          </div>
          <div class="text-sm font-semibold text-gray-800">发展期</div>
          <div class="text-xs text-gray-500 mt-1">12-15岁</div>
          <div class="absolute top-2 right-2">
            <i class="fas fa-crown text-yellow-500 text-xs"></i>
          </div>
        </button>

        <button
          class="stage-btn bg-white rounded-2xl p-4 shadow-sm border border-gray-100 text-center active:scale-95 transition-transform relative"
          data-stage="加速期"
          data-requires-membership="true"
        >
          <div
            class="w-12 h-12 bg-orange-100 rounded-xl flex items-center justify-center mx-auto mb-2"
          >
            <span class="text-2xl">⚡️</span>
          </div>
          <div class="text-sm font-semibold text-gray-800">加速期</div>
          <div class="text-xs text-gray-500 mt-1">15-18岁</div>
          <div class="absolute top-2 right-2">
            <i class="fas fa-crown text-yellow-500 text-xs"></i>
          </div>
        </button>

        <button
          class="stage-btn bg-white rounded-2xl p-4 shadow-sm border border-gray-100 text-center active:scale-95 transition-transform relative"
          data-stage="精通期"
          data-requires-membership="true"
        >
          <div
            class="w-12 h-12 bg-yellow-100 rounded-xl flex items-center justify-center mx-auto mb-2"
          >
            <span class="text-2xl">🏆</span>
          </div>
          <div class="text-sm font-semibold text-gray-800">精通期</div>
          <div class="text-xs text-gray-500 mt-1">18-30岁</div>
          <div class="absolute top-2 right-2">
            <i class="fas fa-crown text-yellow-500 text-xs"></i>
          </div>
        </button>

        <button
          class="stage-btn bg-white rounded-2xl p-4 shadow-sm border border-gray-100 text-center active:scale-95 transition-transform relative"
          data-stage="大师期"
          data-requires-membership="true"
        >
          <div
            class="w-12 h-12 bg-indigo-100 rounded-xl flex items-center justify-center mx-auto mb-2"
          >
            <span class="text-2xl">🧘</span>
          </div>
          <div class="text-sm font-semibold text-gray-800">大师期</div>
          <div class="text-xs text-gray-500 mt-1">30岁+</div>
          <div class="absolute top-2 right-2">
            <i class="fas fa-crown text-yellow-500 text-xs"></i>
          </div>
        </button>
      </div>

      <!-- 学习说明 -->
      <div class="bg-white rounded-2xl p-6 shadow-sm border border-gray-100">
        <h4 class="font-semibold text-gray-800 mb-3">学习说明</h4>
        <div class="space-y-3 text-sm text-gray-600">
          <div class="flex items-start space-x-3">
            <div
              class="w-6 h-6 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5"
            >
              <i class="fas fa-check text-green-500 text-xs"></i>
            </div>
            <p>萌芽期和基础期免费开放，适合初学者</p>
          </div>
          <div class="flex items-start space-x-3">
            <div
              class="w-6 h-6 bg-yellow-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5"
            >
              <i class="fas fa-crown text-yellow-500 text-xs"></i>
            </div>
            <p>其他阶段需要开通会员，解锁更多高级功能</p>
          </div>
          <div class="flex items-start space-x-3">
            <div
              class="w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5"
            >
              <i class="fas fa-book text-blue-500 text-xs"></i>
            </div>
            <p>每个阶段都有针对性的词汇和例句</p>
          </div>
        </div>
      </div>
    </div>

    <!-- 会员提示弹窗 -->
    <div id="membershipModal" class="modal">
      <div class="modal-content">
        <div
          class="w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4"
        >
          <i class="fas fa-crown text-yellow-500 text-2xl"></i>
        </div>
        <h3 class="text-lg font-bold text-gray-800 mb-2">开通会员</h3>
        <p class="text-gray-600 text-sm mb-6">该学习阶段需要开通会员才能使用，解锁更多高级功能</p>
        <div class="flex space-x-3">
          <button
            id="cancelMembership"
            class="flex-1 py-3 px-4 border border-gray-300 rounded-xl text-gray-700 font-medium"
          >
            取消
          </button>
          <button
            id="openMembership"
            class="flex-1 py-3 px-4 bg-red-500 text-white rounded-xl font-medium"
          >
            立即开通
          </button>
        </div>
      </div>
    </div>

    <!-- 底部导航栏 -->
    <div class="absolute bottom-0 left-0 right-0 bg-white border-t border-gray-200">
      <div class="flex justify-around items-center py-2 px-4">
        <div class="flex flex-col items-center py-2" onclick="window.location.href='home.html'">
          <i class="fas fa-home text-gray-400 text-xl"></i>
          <span class="text-xs text-gray-400 mt-1">首页</span>
        </div>
        <div class="flex flex-col items-center py-2" onclick="window.location.href='progress.html'">
          <i class="fas fa-chart-line text-gray-400 text-xl"></i>
          <span class="text-xs text-gray-400 mt-1">进度</span>
        </div>
        <div class="flex flex-col items-center py-2" onclick="window.location.href='profile.html'">
          <i class="fas fa-user text-gray-400 text-xl"></i>
          <span class="text-xs text-gray-400 mt-1">我的</span>
        </div>
      </div>
    </div>

    <script>
      // 模拟用户会员状态（实际应用中应该从后端获取）
      let isUserMember = false

      document.querySelectorAll('.stage-btn').forEach((button) => {
        button.addEventListener('click', () => {
          const stage = button.getAttribute('data-stage')
          const requiresMembership = button.getAttribute('data-requires-membership') === 'true'

          // 检查是否需要会员
          if (requiresMembership && !isUserMember) {
            // 显示会员弹窗
            document.getElementById('membershipModal').classList.add('show')
            return
          }

          // 如果不需要会员或已经是会员，跳转到背单词页面
          window.location.href = `vocabulary-study.html?stage=${encodeURIComponent(stage)}`
        })
      })

      // 会员弹窗事件处理
      document.getElementById('cancelMembership').addEventListener('click', () => {
        document.getElementById('membershipModal').classList.remove('show')
      })

      document.getElementById('openMembership').addEventListener('click', () => {
        // 这里应该跳转到会员购买页面
        console.log('跳转到会员购买页面')
        // 模拟开通会员成功
        isUserMember = true
        document.getElementById('membershipModal').classList.remove('show')
      })

      // 点击弹窗外部关闭弹窗
      document.getElementById('membershipModal').addEventListener('click', (e) => {
        if (e.target.id === 'membershipModal') {
          document.getElementById('membershipModal').classList.remove('show')
        }
      })
    </script>
  </body>
</html>
